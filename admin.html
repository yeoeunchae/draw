<!doctype html>
<html lang="ko">
<head>
  <link rel="manifest" href="manifest.json">
<script>
 if ("serviceWorker" in navigator) {
   navigator.serviceWorker.register("/service-worker.js");
 }
</script>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë½‘ê¸° ê´€ë¦¬ì í˜ì´ì§€</title>
<style>
  body{font-family:sans-serif;background:#f6f8fb;padding:20px;margin:0}
  .box{background:#fff;padding:20px;border-radius:10px;max-width:800px;margin:auto;box-shadow:0 3px 12px rgba(0,0,0,0.08)}
  input,button{padding:8px;border-radius:8px;border:1px solid #ddd}
  button{background:#2563eb;color:#fff;border:0;cursor:pointer}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{padding:8px;border-bottom:1px solid #eee}
  .danger{background:#ef4444}
  .ghost{background:#e6eefd;color:#1e3a8a}
  .password-box{margin-top:20px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
</style>
</head>
<body>
<div class="box">
  <h2>ğŸ›ï¸ ê´€ë¦¬ì í˜ì´ì§€</h2>

  <!-- í•­ëª© ì¶”ê°€ ì˜ì—­ -->
  <div style="display:flex; gap:10px; flex-wrap:wrap;">
    <input id="name" placeholder="í•­ëª© ì´ë¦„" />
    <input id="count" type="number" min="1" placeholder="ìˆ˜ëŸ‰" />
    <button onclick="addItem()">ì¶”ê°€</button>
    <button class="ghost" onclick="render()">ëª©ë¡ ìƒˆë¡œê³ ì¹¨</button>
    <button class="danger" onclick="resetAll()">ì „ì²´ ë¦¬ì…‹</button>
  </div>

  <!-- í•­ëª© ëª©ë¡ í…Œì´ë¸” -->
  <table>
    <thead>
      <tr><th>í•­ëª©</th><th>ì´ˆê¸° ìˆ˜ëŸ‰</th><th>ë‚¨ì€ ìˆ˜ëŸ‰</th><th>ê´€ë¦¬</th></tr>
    </thead>
    <tbody id="list"></tbody>
  </table>

  <!-- ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì„¤ì •/ìˆ˜ì • ì˜ì—­ -->
  <div class="password-box">
    <input type="password" id="adminPassInput" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥/ìˆ˜ì •" />
    <button onclick="setAdminPassword()">ë¹„ë°€ë²ˆí˜¸ ì €ì¥/ìˆ˜ì •</button>
    <span id="passMsg" style="color:green;"></span>
  </div>

</div>

<script>
  // í•­ëª© ê´€ë¦¬
  let items = JSON.parse(localStorage.getItem("items") || "[]");

  function save() {
    localStorage.setItem("items", JSON.stringify(items));
    render();
  }

  function addItem() {
    const name = document.getElementById("name").value.trim();
    const count = parseInt(document.getElementById("count").value);
    if (!name || isNaN(count) || count < 1) return alert("í•­ëª©ëª…ê³¼ ìˆ˜ëŸ‰ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•˜ì„¸ìš”.");
    items.push({ id: Date.now(), name, initial: count, left: count });
    save();
    document.getElementById("name").value = "";
    document.getElementById("count").value = "";
  }

  function removeItem(id) {
    if (!confirm("ì‚­ì œí• ê¹Œìš”?")) return;
    items = items.filter(i => i.id !== id);
    save();
  }

  function resetAll() {
    if (!confirm("ëª¨ë“  í•­ëª©ì„ ì´ˆê¸°í™”í• ê¹Œìš”?")) return;
    items = [];
    save();
  }

  function render() {
    items = JSON.parse(localStorage.getItem("items") || "[]");
    const tbody = document.getElementById("list");
    tbody.innerHTML = "";
    items.forEach(item => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${item.name}</td>
        <td>${item.initial}</td>
        <td>${item.left}</td>
        <td><button class="danger" onclick="removeItem(${item.id})">ì‚­ì œ</button></td>
      `;
      tbody.appendChild(tr);
    });
  }

  render();

  // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬
  function setAdminPassword() {
    const pass = document.getElementById("adminPassInput").value.trim();
    if (!pass) return alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
    localStorage.setItem("adminPass", pass);
    document.getElementById("passMsg").innerText = "âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.";
    setTimeout(() => document.getElementById("passMsg").innerText = "", 3000);
    document.getElementById("adminPassInput").value = "";
  }

  // í•„ìš”ì‹œ ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ í™•ì¸ìš©
  function checkAdminPassword(input) {
    const savedPass = localStorage.getItem("adminPass") || "1234"; // ê¸°ë³¸ê°’ 1234
    return input === savedPass;
  }

</script>
</body>
</html>
